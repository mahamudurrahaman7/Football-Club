<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>BVB - Upcoming Matches</title>

    <link href="/img/realIcon2.png" rel="icon">
    <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">

    <style>
        body {
            background-color: #000;
            color: #fff;
        }

        .sidebar {
            height: 100vh;
            width: 250px;
            position: fixed;
            background-color: #111;
            padding: 20px;
        }

        .sidebar h2 {
            color: #FDE100;
            text-align: center;
        }

        .sidebar a {
            display: block;
            color: white;
            padding: 10px;
            text-decoration: none;
        }

        .main-content {
            margin-left: 250px;
            padding: 30px;
        }

        h1, h3, h5 {
            color: #FDE100;
        }

        .card, .match-card, .ticket-section, .ticket-input {
            background-color: #111;
            border: 1px solid #333;
            padding: 20px;
            margin-bottom: 15px;
        }

        .btn-primary {
            background-color: #FDE100;
            color: #000;
            border: none;
        }
        .form-label{
            color: #dddddd;
        }
    </style>
</head>

<body>

<div class="sidebar">
    <h2>BVB 09</h2>
    <a href="dashboard">Dashboard</a>
    <a href="player-list">Player List</a>
    <a href="result-list">Result List</a>
    <a href="highlights">Highlights</a>
</div>

<div class="main-content">
    <div th:if="${isAdmin}">
        <div class="card">
            <h5>Create New Match</h5>

            <form method="post" th:action="@{upcoming-matches}" th:object="${matches}">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">Match Type</label>
                        <select th:field="*{type}" class="form-select">
                            <option value="Home">Home</option>
                            <option value="Away">Away</option>
                        </select>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">Opponent</label>
                        <select th:field="*{opponentName}" class="form-select">
                            <option value="Bayern Munich">Bayern Munich</option>
                            <option value="RB Leipzig">RB Leipzig</option>
                            <option value="Bayer Leverkusen">Bayer Leverkusen</option>
                            <option value="Borussia Mönchengladbach">Borussia Mönchengladbach</option>
                            <option value="Eintracht Frankfurt">Eintracht Frankfurt</option>
                            <option value="VfB Stuttgart">VfB Stuttgart</option>
                            <option value="TSG Hoffenheim">TSG Hoffenheim</option>
                            <option value="SC Freiburg">SC Freiburg</option>
                            <option value="VfL Wolfsburg">VfL Wolfsburg</option>
                            <option value="Werder Bremen">Werder Bremen</option>
                            <option value="FC Augsburg">FC Augsburg</option>
                            <option value="Mainz 05">Mainz 05</option>
                            <option value="Union Berlin">Union Berlin</option>
                            <option value="FC Köln">FC Köln</option>
                            <option value="Bochum">Bochum</option>
                            <option value="Real Madrid">Real Madrid</option>
                            <option value="Barcelona">Barcelona</option>
                            <option value="Manchester City">Manchester City</option>
                            <option value="Arsenal">Arsenal</option>
                            <option value="Liverpool">Liverpool</option>
                            <option value="Chelsea">Chelsea</option>
                            <option value="Inter Milan">Inter Milan</option>
                            <option value="AC Milan">AC Milan</option>
                            <option value="Juventus">Juventus</option>
                            <option value="Paris Saint Germain">Paris Saint Germain</option>
                        </select>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">Tournament</label>
                        <select th:field="*{tournamentName}" class="form-select">
                            <option value="Bundesliga">Bundesliga</option>
                            <option value="DFB Pokal">DFB Pokal</option>
                            <option value="UEFA Champions League">UEFA Champions League</option>
                            <option value="UEFA Europa League">UEFA Europa League</option>
                        </select>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">Match Date</label>
                        <input type="date" class="form-control" th:field="*{date}">
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">Match Time</label>
                        <input type="time" class="form-control" th:field="*{time}">
                    </div>
                </div>

                <div class="ticket-section">
                    <h3>Ticket Information</h3>
                    <div id="ticket-container">
                        <div th:each="ticket, i : *{tickets}" class="ticket-input">
                            <label>Ticket Type:</label>
                            <input type="text" class="form-control" th:name="'tickets[' + ${i.index} + '].ticketType'" required />

                            <label>Ticket Price (USD):</label>
                            <input type="number" class="form-control" th:name="'tickets[' + ${i.index} + '].price'" min="600" max="3000" required />

                            <label>Available Quantity:</label>
                            <input type="number" class="form-control" th:name="'tickets[' + ${i.index} + '].availableQuantity'" min="1000" max="45000" required />
                            <hr/>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="addTicket()">Add Ticket Type</button>
                </div>

                <button type="submit" class="btn btn-primary">Save Match</button>
            </form>
        </div>
    </div>

    <h1 class="text-center my-4">Upcoming Matches</h1>

    <div th:each="match : ${upcomingMatchesList}" class="match-card">
        <a th:href="@{/match/{id}(id=${match.id})}" style="text-decoration: none; color: inherit;">
            <h3>VS <span th:text="${match.opponentName}"></span></h3>
            <h4 style="color: #fff;">Tournament: <span th:text="${match.tournamentName}"></span></h4>
            <h5 style="color: #999;"><span th:text="${match.type}"></span> Match</h5>
        </a>

        <div th:if="${isAdmin}" class="mt-3">
            <form method="post" th:action="@{/delete-upcoming-match}" style="display: inline-block;">
                <input type="hidden" name="id" th:value="${match.id}" />
                <button type="submit" class="btn btn-danger">Delete</button>
            </form>

            <form method="post" th:action="@{/update-upcoming-match}" style="display: inline-block;">
                <input type="hidden" name="id" th:value="${match.id}" />
                <button type="submit" class="btn btn-success">Update Result</button>
            </form>
        </div>
    </div>
</div>

<script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<script>
    function addTicket() {
        var container = document.getElementById('ticket-container');
        var newIndex = container.querySelectorAll('.ticket-input').length;

        var newTicketDiv = document.createElement('div');
        newTicketDiv.className = 'ticket-input';

        newTicketDiv.innerHTML = `
            <label>Ticket Type:</label>
            <input type="text" class="form-control" name="tickets[${newIndex}].ticketType" required />

            <label>Ticket Price (USD):</label>
            <input type="number" class="form-control" name="tickets[${newIndex}].price" min="600" max="3000" required />

            <label>Available Quantity:</label>
            <input type="number" class="form-control" name="tickets[${newIndex}].availableQuantity" min="1000" max="45000" required />
            <hr/>
        `;

        container.appendChild(newTicketDiv);
    }
</script>

</body>
</html>